<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lian - Research</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100;300;400;500;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.min.js"></script>
<script>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        primary: '#2D3047',
        secondary: '#E8E9F3'
      }
    }
  }
}
</script>
<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'SF Pro Display', system-ui, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
.nav-link {
  position: relative;
}
.nav-link::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  width: 0;
  height: 1px;
  background-color: currentColor;
  transition: width 0.3s ease;
}
.nav-link:hover::after {
  width: 100%;
}
</style>
</head>
<body class="bg-white text-primary">
<!-- 导航栏部分与 bio.html 相同 -->
<nav class="fixed top-0 w-full bg-white/90 backdrop-blur-sm z-50 border-b border-gray-100">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-16">
      <a href="index.html" class="text-xl font-medium">Lian</a>
      <div class="hidden md:flex space-x-8">
        <a href="index.html" class="nav-link text-sm hover:text-primary transition-colors">HOME</a>
        <a href="bio.html" class="nav-link text-sm hover:text-primary transition-colors">BIO</a>
        <a href="research.html" class="nav-link text-sm hover:text-primary transition-colors">RESEARCH</a>
        <a href="work.html" class="nav-link text-sm hover:text-primary transition-colors">WORK</a>
        <a href="cv.html" class="nav-link text-sm hover:text-primary transition-colors">CV</a>
        <a href="contact.html" class="nav-link text-sm hover:text-primary transition-colors">CONTACT</a>
        <a href="other.html" class="nav-link text-sm hover:text-primary transition-colors">OTHER</a>
      </div>
    </div>
  </div>
</nav>

<main class="pt-32 pb-16 min-h-screen">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="max-w-6xl">
      <h1 class="text-3xl font-extralight tracking-wide mb-16">Research Projects</h1>
      
      <div class="space-y-16 mb-20 max-w-[100%]">
        <!-- Metapher Project -->
        <div class="group hover:bg-neutral-50 -mx-4 px-8 py-6 transition-all duration-300 border-l-2 border-transparent hover:border-emerald-600">
          <!-- 标题和Logo部分 -->
          <div class="flex items-center justify-between mb-8">
            <div class="flex items-center space-x-4">
              <img 
                src="images/metapher/logo.png" 
                alt="Metapher Logo" 
                class="w-10 h-10 rounded-full object-cover"
              >
              <div>
                <h2 class="text-xl font-extralight tracking-wide group-hover:text-emerald-700 transition-colors">Metapher As Semantic Encryption</h2>
                <p class="text-sm font-light text-neutral-600 mt-1">Privacy-Preserving Poetic NLP Framework</p>
              </div>
            </div>
            <div class="text-right">
              <p class="text-sm font-light text-emerald-600 mb-1">Project Lead & Algorithm Architect</p>
              <span class="text-sm font-light text-neutral-500">2025.1-2025.4</span>
            </div>
          </div>

          <!-- 内容和轮播的两列布局 -->
          <div class="grid grid-cols-1 md:grid-cols-[1fr,280px] gap-[8px] items-start">
            <!-- 左侧：项目介绍 -->
            <div class="space-y-6 pr-2">
              <!-- Project Overview -->
              <div class="space-y-3">
                <h3 class="text-lg font-light text-emerald-600 tracking-wide">Project Overview</h3>
                <div class="space-y-4">
                  <p class="text-base font-light leading-relaxed text-neutral-700">
                    Metapher explores the intersection of computational linguistics, privacy-preserving AI, and poetic expression. The project reimagines metaphors as natural ciphertexts—elegant linguistic structures that can simultaneously convey meaning while protecting sensitive information through their inherent ambiguity.
                  </p>
                  <p class="text-base font-light leading-relaxed text-neutral-700">
                    This framework provides a novel approach to privacy-enhancing technology that maintains both semantic richness and human interpretability, unlike traditional cryptographic methods that sacrifice expressiveness for security. <a href="Metaphor_as_Semantic_Encryption__Zero_Knowledge_Proof_Using_Dream_of_the_Red_Chamber_as_an_Example.pdf" class="text-emerald-600 hover:text-emerald-700 transition-colors underline-offset-4 hover:underline" target="_blank" rel="noopener noreferrer">View Full Research Paper (PDF)</a>
                  </p>
                </div>
              </div>

              <!-- Technical Implementation -->
              <div class="space-y-4">
                <h3 class="text-lg font-light text-emerald-600 tracking-wide">Technical Implementation</h3>
                <div class="grid grid-cols-1 gap-4">
                  <div>
                    <h4 class="text-base font-medium text-neutral-700">Metaphorical Embedding System</h4>
                    <ul class="mt-2 space-y-1 list-disc pl-4">
                      <li class="text-base font-light text-neutral-700">Developed dual-space embedding architecture mapping literal concepts to metaphorical representations</li>
                      <li class="text-base font-light text-neutral-700">Implemented adversarial training pipeline to balance semantic preservation and privacy protection</li>
                      <li class="text-base font-light text-neutral-700">Achieved 87% semantic retention with 92% privacy preservation against state-of-the-art NLP attacks</li>
                    </ul>
                  </div>

                  <div>
                    <h4 class="text-base font-medium text-neutral-700">Context-Aware Transformation Engine</h4>
                    <ul class="mt-2 space-y-1 list-disc pl-4">
                      <li class="text-base font-light text-neutral-700">Created parameterized metaphor generation system with controllable abstraction levels</li>
                      <li class="text-base font-light text-neutral-700">Built fine-tuned LLM for contextually appropriate metaphorical transformations</li>
                      <li class="text-base font-light text-neutral-700">Established semantic reversal mechanism for authorized interpretation</li>
                    </ul>
                  </div>

                  <div>
                    <h4 class="text-base font-medium text-neutral-700">Evaluation Framework</h4>
                    <ul class="mt-2 space-y-1 list-disc pl-4">
                      <li class="text-base font-light text-neutral-700">Designed novel metrics combining linguistic aesthetics with information security properties</li>
                      <li class="text-base font-light text-neutral-700">Conducted comprehensive evaluation against modern ML-based text analysis tools</li>
                      <li class="text-base font-light text-neutral-700">Validated system through cross-cultural interpretation studies with 78% cross-cultural coherence</li>
                    </ul>
                  </div>
                </div>
              </div>

              <!-- Applications & Impact -->
              <div class="space-y-2">
                <h3 class="text-lg font-light text-emerald-600 tracking-wide">Applications & Impact</h3>
                <p class="text-base font-light text-neutral-700">
                  Successfully deployed in sensitive communication contexts including healthcare data sharing and creative writing preservation. The system enables a new paradigm of "readable privacy" where protected communications maintain literary quality and emotional resonance while safeguarding specific details through metaphorical obfuscation. Currently being extended to multilingual applications and personalized privacy preferences.
                </p>
              </div>
            </div>

            <!-- 右侧：功能界面展示 -->
            <div class="flex justify-end items-center h-full">
              <div class="relative w-[260px] h-[520px] rounded-[16px] overflow-hidden bg-white shadow-lg transform group-hover:scale-[1.02] transition-all duration-500">
                <!-- PDF预览区域 -->
                <div class="pdf-preview w-full h-full overflow-y-auto overflow-x-hidden p-2 bg-gray-50" id="pdf-container">
                  <div class="text-sm text-center text-gray-500 py-4 flex items-center justify-center space-x-2">
                    <svg class="animate-spin h-4 w-4 text-emerald-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                      <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    <span>PDF预览加载中...</span>
                  </div>
                  <div class="flex flex-col space-y-4 w-full items-center pb-4" id="pdf-thumbnails">
                    <!-- PDF缩略图将通过JavaScript动态加载 -->
                  </div>
                  <!-- 备用PDF链接 -->
                  <div class="text-center py-4 border-t border-gray-200 mt-4 hidden" id="pdf-fallback">
                    <p class="text-sm text-gray-600 mb-2">您也可以直接查看完整PDF文档：</p>
                    <a href="Metaphor_as_Semantic_Encryption__Zero_Knowledge_Proof_Using_Dream_of_the_Red_Chamber_as_an_Example.pdf" target="_blank" class="inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-emerald-600 rounded-md hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500">
                      <svg class="w-4 h-4 mr-2" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
                      </svg>
                      打开PDF文档
                    </a>
                  </div>
                </div>
                
                <!-- 悬浮预览窗口 -->
                <div id="pdf-hover-preview" class="fixed hidden bg-white rounded-lg shadow-2xl z-50 p-3 border border-gray-200 transform transition-all duration-300 origin-center" style="width: 500px; height: auto;">
                  <div class="w-full flex flex-col">
                    <div class="mb-2 flex justify-between items-center">
                      <span class="text-xs text-emerald-700 font-medium" id="hover-preview-title">Page Preview</span>
                      <span class="text-xs text-gray-500">点击查看完整PDF</span>
                    </div>
                    <div class="w-full flex justify-center items-center bg-gray-50 rounded p-2">
                      <img src="" alt="PDF页面预览" id="hover-preview-img" class="max-w-full max-h-[600px] object-contain" />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <!-- HipGo Project -->
        <div class="group hover:bg-neutral-50 -mx-4 px-8 py-6 transition-all duration-300 border-l-2 border-transparent hover:border-emerald-600">
          <!-- 标题和Logo部分 -->
          <div class="flex items-center justify-between mb-8">
            <div class="flex items-center space-x-4">
              <img 
                src="images/hipgo/logo.png" 
                alt="HipGo Logo" 
                class="w-10 h-10 rounded-full object-cover"
              >
              <div>
                <h2 class="text-xl font-extralight tracking-wide group-hover:text-emerald-700 transition-colors">HipGo</h2>
                <p class="text-sm font-light text-neutral-600 mt-1">Mobile WeChat Intervention for PAO Care</p>
              </div>
            </div>
            <div class="text-right">
              <p class="text-sm font-light text-emerald-600 mb-1">Full-stack Developer</p>
              <span class="text-sm font-light text-neutral-500">2024.12-now</span>
            </div>
          </div>

          <!-- 两列布局 -->
          <div class="grid grid-cols-1 md:grid-cols-[1fr,280px] gap-[8px] items-start">
            <!-- 左侧内容 -->
            <div class="space-y-6 pr-2">
              <div class="space-y-4">
                <h3 class="text-lg font-light text-emerald-600 tracking-wide">Project Overview</h3>
                <p class="text-base font-light leading-relaxed text-neutral-700">
                  As a DDH patient myself, I discovered the high prevalence yet low awareness of this condition among young women during my pre-surgery research. This personal experience led me to identify critical gaps in current post-PAO care.
                </p>
                <p class="text-base font-light leading-relaxed text-neutral-700">
                  Through extensive patient community research, I developed HipGo as a personalized mobile intervention that integrates pain management, rehabilitation guidance, and psychological support, addressing the unique challenges faced by DDH patients throughout their recovery journey.
                </p>

                <h3 class="text-base font-light text-neutral-700 group-hover:text-emerald-600 transition-colors">Technical Implementation</h3>
                <div class="space-y-3">
                  <h4 class="text-base font-medium text-neutral-700">AI-Powered Pain Management</h4>
                  <ul class="space-y-1 list-disc pl-4">
                    <li class="text-base font-light text-neutral-700">Fine-tuned BERT model for pain description analysis (3.2k labeled clinical records)</li>
                    <li class="text-base font-light text-neutral-700">SVG-based visual pain mapping with touch/voice multimodal input</li>
                    <li class="text-base font-light text-neutral-700">Real-time pain pattern recognition with 94% accuracy</li>
                  </ul>
                  
                  <h4 class="text-base font-medium text-neutral-700">Clinical Data Integration</h4>
                  <ul class="space-y-1 list-disc pl-4">
                    <li class="text-base font-light text-neutral-700">Collaborated with orthopedic specialists for pathway design</li>
                    <li class="text-base font-light text-neutral-700">Standardized data collection protocol (WOMAC & VAS scales)</li>
                    <li class="text-base font-light text-neutral-700">Interactive visualization dashboard for clinical monitoring</li>
                  </ul>
                  
                  <h4 class="text-base font-medium text-neutral-700">Adaptive Support System</h4>
                  <ul class="space-y-1 list-disc pl-4">
                    <li class="text-base font-light text-neutral-700">ML-driven exercise adjustment based on pain & progress data</li>
                    <li class="text-base font-light text-neutral-700">Automated risk assessment with clinical threshold alerts</li>
                  </ul>
                </div>

                <h3 class="text-base font-light text-neutral-700 group-hover:text-emerald-600 transition-colors">Clinical Validation</h3>
                <p class="text-base font-light leading-relaxed text-neutral-700">
                  Currently in Phase II trials at First Affiliated Hospital of GZUCM, with weekly clinical reviews and iterative refinement based on surgeon feedback. Initial data shows significant improvement in pain management efficacy (35%) and patient compliance (42%).
                </p>
              </div>
            </div>

            <!-- 右侧：界面展示轮播 -->
            <div class="flex justify-end items-center h-full">
              <div class="relative w-[260px] h-[520px] rounded-[36px] overflow-hidden bg-white shadow-[0_0_40px_-15px_rgba(0,0,0,0.15)] transform group-hover:scale-[1.02] transition-all duration-500">
                <div class="carousel relative w-full h-full">
                  <div class="carousel-item absolute w-full h-full transition-all duration-500 ease-in-out">
                    <img src="images/hipgo/1.jpg" alt="HipGo Interface 1" class="w-full h-full object-cover">
                  </div>
                  <div class="carousel-item absolute w-full h-full transition-all duration-500 ease-in-out opacity-0">
                    <img src="images/hipgo/2.jpg" alt="HipGo Interface 2" class="w-full h-full object-cover">
                  </div>
                  <div class="carousel-item absolute w-full h-full transition-all duration-500 ease-in-out opacity-0">
                    <img src="images/hipgo/3.jpg" alt="HipGo Interface 3" class="w-full h-full object-cover">
                  </div>
                  <div class="carousel-item absolute w-full h-full transition-all duration-500 ease-in-out opacity-0">
                    <img src="images/hipgo/4.jpg" alt="HipGo Interface 4" class="w-full h-full object-cover">
                  </div>
                  <div class="carousel-item absolute w-full h-full transition-all duration-500 ease-in-out opacity-0">
                    <img src="images/hipgo/5.jpg" alt="HipGo Interface 5" class="w-full h-full object-cover">
                  </div>
                </div>
                <!-- 添加相同的效果 -->
                <div class="absolute inset-0 pointer-events-none shadow-inner"></div>
                <div class="absolute inset-0 bg-gradient-to-tr from-white/5 to-transparent opacity-50 pointer-events-none"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Multimodal Sleep Monitoring System Project -->
        <div class="group hover:bg-neutral-50 -mx-4 px-8 py-6 transition-all duration-300 border-l-2 border-transparent hover:border-emerald-600">
          <div class="space-y-6">
            <div class="flex justify-between items-baseline">
              <h2 class="text-2xl font-extralight tracking-wide group-hover:text-emerald-700 transition-colors">Multimodal Sleep Monitoring System</h2>
              <div class="text-right">
                <p class="text-sm font-light text-emerald-600 mb-1">Technical Researcher</p>
                <span class="text-sm font-light text-neutral-500">2024.8-now</span>
              </div>
            </div>
            <p class="text-sm font-light text-neutral-600 italic">Based Sleep Onset Detection for Automated Music Control</p>
            
            <div class="space-y-4">
              <h3 class="text-base font-light text-neutral-700 group-hover:text-emerald-600 transition-colors">Technical Contributions</h3>
              <p class="text-base font-light leading-relaxed text-neutral-700 tracking-wide">
                Pioneered multimodal sensor fusion (IMU+PPG+Audio: 49.75% accuracy) and a 12-layer U-Net for sleep stage analysis. Enabled continuous 8-hour data analysis, boosting REM recognition by 39% (128-min window) through novel accelerometer/PPG signal processing.
              </p>

              <h3 class="text-base font-light text-neutral-700 group-hover:text-emerald-600 transition-colors">Key Achievements</h3>
              <p class="text-base font-light leading-relaxed text-neutral-700 tracking-wide">
                Developed and implemented a multimodal sleep onset detection algorithm and a deep learning-based sleep stage analysis model, significantly improving consumer sleep tracker performance.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>

<footer class="py-8 bg-gray-50">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-sm text-gray-500">
    <p>&copy; 2024 Lian. All rights reserved.</p>
  </div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Metapher 轮播
  const metapherCarousel = document.querySelector('.carousel-metapher');
  if (metapherCarousel) {
    const metapherItems = metapherCarousel.querySelectorAll('.carousel-item');
    let metapherCurrentIndex = 0;

    function showMetapherSlide(index) {
      metapherItems.forEach(item => item.style.opacity = '0');
      metapherItems[index].style.opacity = '1';
    }

    showMetapherSlide(0);
    setInterval(() => {
      metapherCurrentIndex = (metapherCurrentIndex + 1) % metapherItems.length;
      showMetapherSlide(metapherCurrentIndex);
    }, 3000);
  }

  // HipGo 轮播
  const hipgoCarousel = document.querySelector('.carousel');
  if (hipgoCarousel) {
    const hipgoItems = hipgoCarousel.querySelectorAll('.carousel-item');
    let hipgoCurrentIndex = 0;

    function showHipgoSlide(index) {
      hipgoItems.forEach(item => item.style.opacity = '0');
      hipgoItems[index].style.opacity = '1';
    }

    showHipgoSlide(0);
    setInterval(() => {
      hipgoCurrentIndex = (hipgoCurrentIndex + 1) % hipgoItems.length;
      showHipgoSlide(hipgoCurrentIndex);
    }, 3000);
  }
});
</script>

<!-- PDF处理脚本 -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // 设置PDF.js工作路径
  pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.worker.min.js';
  
  // 修改PDF文件路径，使用相对路径
  const pdfUrl = 'Metapher as ciphertext.pdf';
  const fullPdfUrl = 'Metaphor_as_Semantic_Encryption__Zero_Knowledge_Proof_Using_Dream_of_the_Red_Chamber_as_an_Example.pdf';
  const container = document.getElementById('pdf-thumbnails');
  const hoverPreview = document.getElementById('pdf-hover-preview');
  const hoverPreviewImg = document.getElementById('hover-preview-img');
  const loadingElement = document.querySelector('#pdf-container .text-sm');
  
  // 添加详细的错误处理
  function handleError(error) {
    console.error('Error loading PDF:', error);
    if (loadingElement) {
      loadingElement.innerHTML = '<div class="text-red-500">无法加载PDF预览</div><div class="text-xs text-gray-500 mt-2">错误信息: ' + error.message + '</div>';
    } else {
      const errorMsg = document.createElement('div');
      errorMsg.className = 'text-red-500 text-center p-4';
      errorMsg.textContent = '无法加载PDF预览';
      container.appendChild(errorMsg);
    }
    
    // 显示备用PDF链接
    document.getElementById('pdf-fallback').classList.remove('hidden');
  }
  
  // 加载PDF文档 - 添加更多错误处理
  pdfjsLib.getDocument({
    url: pdfUrl,
    cMapUrl: 'https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/cmaps/',
    cMapPacked: true,
  }).promise.then(function(pdf) {
    // 清除加载信息
    if (loadingElement) {
      loadingElement.remove();
    }
    
    // 获取页数
    const numPages = pdf.numPages;
    
    // 生成每页的缩略图
    for (let pageNum = 1; pageNum <= numPages; pageNum++) {
      pdf.getPage(pageNum).then(function(page) {
        // 保持原始纵横比的视口
        const originalViewport = page.getViewport({ scale: 1.0 });
        const containerWidth = 230; // 容器宽度
        
        // 计算缩放因子以适应容器宽度同时保持纵横比
        const scale = containerWidth / originalViewport.width;
        const viewport = page.getViewport({ scale: scale });
        
        // 创建缩略图容器
        const thumbContainer = document.createElement('div');
        thumbContainer.className = 'relative w-[230px] rounded-lg border border-gray-200 hover:border-emerald-500 transition-all duration-300 hover:shadow-md cursor-pointer bg-white overflow-hidden transform hover:scale-105 transition-transform duration-300';
        thumbContainer.dataset.page = pageNum;
        
        // 创建画布
        const canvas = document.createElement('canvas');
        const context = canvas.getContext('2d');
        canvas.width = viewport.width;
        canvas.height = viewport.height;
        canvas.className = 'mx-auto';
        
        // 添加页码标签
        const pageLabel = document.createElement('div');
        pageLabel.className = 'absolute bottom-1 right-2 bg-white/80 text-xs px-2 py-0.5 rounded-full text-emerald-700 font-light';
        pageLabel.textContent = `Page ${pageNum}`;
        
        thumbContainer.appendChild(canvas);
        thumbContainer.appendChild(pageLabel);
        container.appendChild(thumbContainer);
        
        // 渲染页面到画布
        const renderContext = {
          canvasContext: context,
          viewport: viewport
        };
        
        page.render(renderContext).promise.then(function() {
          // 缩略图鼠标事件
          thumbContainer.addEventListener('mouseenter', function(e) {
            // 创建高清预览
            pdf.getPage(pageNum).then(function(page) {
              // 使用更高的缩放因子以获得更清晰的预览
              const previewViewport = page.getViewport({ scale: 1.5 });
              const canvas = document.createElement('canvas');
              const context = canvas.getContext('2d');
              canvas.width = previewViewport.width;
              canvas.height = previewViewport.height;
              
              const renderContext = {
                canvasContext: context,
                viewport: previewViewport,
                // 启用抗锯齿和高质量渲染
                intent: 'display',
                renderInteractiveForms: false,
                enableWebGL: true
              };
              
              page.render(renderContext).promise.then(function() {
                hoverPreviewImg.src = canvas.toDataURL('image/jpeg', 0.95);
                
                // 更新标题显示页码
                document.getElementById('hover-preview-title').textContent = `第 ${pageNum} 页预览`;
                
                // 计算位置并显示预览
                const rect = thumbContainer.getBoundingClientRect();
                hoverPreview.style.left = (rect.right + 20) + 'px';
                hoverPreview.style.top = (window.scrollY + rect.top - 100) + 'px';
                hoverPreview.classList.remove('hidden');
                // 添加放大动画效果
                hoverPreview.style.transform = 'scale(1.05)';
                setTimeout(() => {
                  hoverPreview.style.transform = 'scale(1)';
                }, 300);
              });
            });
          });
          
          thumbContainer.addEventListener('mouseleave', function() {
            hoverPreview.classList.add('hidden');
          });
          
          // 点击缩略图打开PDF
          thumbContainer.addEventListener('click', function() {
            window.open(pdfUrl + '#page=' + pageNum, '_blank');
          });
        });
      });
    }
  }).catch(handleError);
});
</script>
</body>
</html> 